{
  "name": "Angebots-Verst√§ndlichkeits-Checker",
  "nodes": [
    {
      "parameters": {
        "formTitle": "Angebots-Verst√§ndlichkeits-Check",
        "formDescription": "Gib die URL deiner Angebotsseite ein und erhalte eine Analyse, wie verst√§ndlich dein Angebot f√ºr KI, Google und Menschen ist.",
        "formFields": {
          "values": [
            {
              "fieldLabel": "URL",
              "fieldType": "text",
              "placeholder": "https://beispiel.de/angebot",
              "requiredField": true
            },
            {
              "fieldLabel": "E-Mail",
              "fieldType": "email",
              "placeholder": "nutzer@firma.de",
              "requiredField": true
            },
            {
              "fieldLabel": "Firmenname",
              "fieldType": "text",
              "placeholder": "Beispiel GmbH",
              "requiredField": false
            },
            {
              "fieldLabel": "Branche",
              "fieldType": "dropdown",
              "dropdownOptions": {
                "values": [
                  { "option": "Dienstleistung / Beratung" },
                  { "option": "E-Commerce / Online-Shop" },
                  { "option": "SaaS / Software" },
                  { "option": "Handwerk / Lokales Gewerbe" },
                  { "option": "Agentur / Freelancer" },
                  { "option": "Sonstiges" }
                ]
              },
              "requiredField": false
            },
            {
              "fieldLabel": "Hauptkeyword",
              "fieldType": "text",
              "placeholder": "z.B. SEO Beratung M√ºnchen",
              "requiredField": false
            }
          ]
        },
        "options": {
          "respondWithOptions": {
            "respondWith": "text",
            "formSubmittedText": "Danke! Dein Angebots-Verst√§ndlichkeits-Check wird jetzt durchgef√ºhrt. Du erh√§ltst das Ergebnis per E-Mail."
          }
        }
      },
      "id": "form-trigger",
      "name": "Angebotsseite eingeben",
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.2,
      "position": [0, 300],
      "webhookId": "angebots-verstaendlichkeits-checker"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.apify.com/v2/acts/apify~website-content-crawler/runs",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ startUrls: [{ url: $json['URL'] }], maxCrawlPages: 1, crawlerType: 'cheerio', removeEmptyElements: true, removeCookieWarnings: true }) }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 30000
        }
      },
      "id": "apify-start",
      "name": "Apify Crawl starten",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [250, 300],
      "credentials": {
        "httpHeaderAuth": {
          "id": "apify-token",
          "name": "Apify API Token"
        }
      }
    },
    {
      "parameters": {
        "amount": 15,
        "unit": "seconds"
      },
      "id": "wait-1",
      "name": "Warte 15s",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [500, 300]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "=https://api.apify.com/v2/actor-runs/{{ $('Apify Crawl starten').item.json.data.id }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 30000
        }
      },
      "id": "apify-check-status",
      "name": "Apify Status pr√ºfen",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [750, 300],
      "credentials": {
        "httpHeaderAuth": {
          "id": "apify-token",
          "name": "Apify API Token"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "condition-succeeded",
              "leftValue": "={{ $json.data.status }}",
              "rightValue": "SUCCEEDED",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "if-succeeded",
      "name": "Crawl erfolgreich?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [1000, 300]
    },
    {
      "parameters": {
        "amount": 15,
        "unit": "seconds"
      },
      "id": "wait-retry",
      "name": "Warte nochmal 15s",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [1000, 550]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "=https://api.apify.com/v2/actor-runs/{{ $('Apify Crawl starten').item.json.data.id }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 30000
        }
      },
      "id": "apify-check-status-2",
      "name": "Apify Status pr√ºfen 2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [750, 550],
      "credentials": {
        "httpHeaderAuth": {
          "id": "apify-token",
          "name": "Apify API Token"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "condition-succeeded-2",
              "leftValue": "={{ $json.data.status }}",
              "rightValue": "SUCCEEDED",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        }
      },
      "id": "if-succeeded-2",
      "name": "Crawl erfolgreich? 2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [500, 550]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "=https://api.apify.com/v2/datasets/{{ $('Apify Crawl starten').item.json.data.defaultDatasetId }}/items?format=json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 30000
        }
      },
      "id": "apify-get-dataset",
      "name": "Apify Dataset abrufen",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1250, 200],
      "credentials": {
        "httpHeaderAuth": {
          "id": "apify-token",
          "name": "Apify API Token"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// ========================================\n// TEXT-EXTRAKTION & BEREINIGUNG\n// Extrahiert und bereinigt den gecrawlten Website-Text\n// ========================================\n\nconst crawlData = $('Apify Dataset abrufen').first().json;\nconst formData = $('Angebotsseite eingeben').first().json;\n\nconst text = crawlData.text || '';\nconst html = crawlData.html || '';\n\n// S√§tze z√§hlen\nconst sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);\nconst words = text.split(/\\s+/).filter(w => w.length > 0);\nconst avgSentenceLength = sentences.length > 0 ? Math.round(words.length / sentences.length) : 0;\n\n// Abs√§tze extrahieren\nconst paragraphs = text.split(/\\n\\n+/).filter(p => p.trim().length > 0);\n\n// √úberschriften aus Metadata oder Crawl-Daten\nconst headings = {\n  h1: crawlData.metadata?.h1 || [],\n  h2: crawlData.metadata?.h2 || [],\n  h3: crawlData.metadata?.h3 || []\n};\n\nreturn [{\n  json: {\n    url: formData['URL'] || crawlData.url || '',\n    title: crawlData.title || '',\n    metaDescription: crawlData.metadata?.description || '',\n    fullText: text,\n    html: html,\n    headings: headings,\n    stats: {\n      wordCount: words.length,\n      sentenceCount: sentences.length,\n      avgSentenceLength: avgSentenceLength,\n      paragraphCount: paragraphs.length\n    },\n    paragraphs: paragraphs,\n    email: formData['E-Mail'] || '',\n    firmenname: formData['Firmenname'] || '',\n    branche: formData['Branche'] || '',\n    hauptkeyword: formData['Hauptkeyword'] || ''\n  }\n}];"
      },
      "id": "text-extraktion",
      "name": "Text-Extraktion & Bereinigung",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1500, 200]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.anthropic.com/v1/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "anthropic-version",
              "value": "2023-06-01"
            },
            {
              "name": "content-type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ model: 'claude-sonnet-4-20250514', max_tokens: 2000, messages: [{ role: 'user', content: 'Du bist ein Experte f√ºr Textverst√§ndlichkeit. Analysiere den folgenden Website-Text und bewerte ihn aus KI-Perspektive.\\n\\n## Der Text:\\n' + $json.fullText + '\\n\\n## Deine Aufgaben:\\n\\n### 1. Zusammenfassung (3 S√§tze)\\nFasse den Text in genau 3 S√§tzen zusammen. Sei ehrlich ‚Äî wenn etwas unklar ist, sag es.\\n\\n### 2. Offene Fragen\\nListe alle Fragen auf, die nach dem Lesen offen bleiben:\\n- Was ist unklar?\\n- Welche Informationen fehlen?\\n- Was k√∂nnte missverstanden werden?\\n\\n### 3. Zitierf√§higkeit\\nK√∂nnte eine KI diesen Text korrekt zitieren und wiedergeben?\\n- Sind die Kernaussagen eindeutig?\\n- Gibt es Widerspr√ºche?\\n- Ist die Firma/der Anbieter klar erkennbar?\\n\\n### 4. Firmen-Erkennung\\n- Wer steckt hinter diesem Angebot?\\n- Ist das Unternehmen/die Person klar identifizierbar?\\n- Gibt es E-E-A-T-relevante Signale (Expertise, Erfahrung, Autorit√§t, Vertrauensw√ºrdigkeit)?\\n\\n### 5. Kinder-Test\\nSchreibe den Text so um, dass ein 12-j√§hriges Kind ihn versteht. Vergleiche dann:\\n- Ist die Kinderversion inhaltlich korrekt? Dann war der Original-Text klar.\\n- Weicht sie stark ab? Dann war der Original-Text zu kompliziert.\\n- Was ging bei der Vereinfachung verloren?\\n\\n### 6. Gesamtbewertung\\nGib einen Score von 1-10 f√ºr die KI-Verst√§ndlichkeit.\\n\\n## Antwortformat (JSON):\\n{\\n  \"zusammenfassung\": \"...\",\\n  \"offene_fragen\": [\"...\", \"...\"],\\n  \"zitierfaehigkeit\": {\\n    \"bewertung\": \"gut/mittel/schlecht\",\\n    \"details\": \"...\"\\n  },\\n  \"firmen_erkennung\": {\\n    \"erkannt\": true,\\n    \"name\": \"...\",\\n    \"details\": \"...\"\\n  },\\n  \"kinder_test\": {\\n    \"vereinfachter_text\": \"...\",\\n    \"vergleich\": \"...\",\\n    \"inhaltlich_korrekt\": true\\n  },\\n  \"score\": 8,\\n  \"verbesserungsvorschlaege\": [\"...\", \"...\"]\\n}\\n\\nAntworte NUR mit dem JSON-Objekt, kein zus√§tzlicher Text.' }] }) }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 120000
        }
      },
      "id": "ki-check",
      "name": "KI-Check",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1800, 0],
      "credentials": {
        "httpHeaderAuth": {
          "id": "anthropic-api-key",
          "name": "Anthropic API Key"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse KI-Check Antwort\nconst response = $input.first().json;\ntry {\n  const text = response.content[0].text;\n  const cleaned = text.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n  const parsed = JSON.parse(cleaned);\n  return [{ json: { ki_check: parsed } }];\n} catch (error) {\n  return [{ json: { ki_check: { error: true, rawResponse: response.content?.[0]?.text || 'Parse Error', score: 0 } } }];\n}"
      },
      "id": "ki-check-parse",
      "name": "KI-Check Parse",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2050, 0]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/on_page/task_post",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify([{ target: $json.url, max_crawl_pages: 1, store_raw_html: false, enable_javascript: true }]) }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 60000
        }
      },
      "id": "dataforseo-onpage",
      "name": "DataForSEO OnPage Start",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1800, 200],
      "credentials": {
        "httpBasicAuth": {
          "id": "dataforseo-credentials",
          "name": "DataForSEO Basic Auth"
        }
      }
    },
    {
      "parameters": {
        "amount": 20,
        "unit": "seconds"
      },
      "id": "wait-dataforseo",
      "name": "Warte auf DataForSEO",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [2050, 200]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/on_page/summary",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify([{ id: $('DataForSEO OnPage Start').first().json.tasks?.[0]?.id }]) }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 60000
        }
      },
      "id": "dataforseo-summary",
      "name": "DataForSEO Summary abrufen",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2300, 200],
      "credentials": {
        "httpBasicAuth": {
          "id": "dataforseo-credentials",
          "name": "DataForSEO Basic Auth"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Merge DataForSEO Ergebnisse mit Text-Daten f√ºr Google-Check\nconst textData = $('Text-Extraktion & Bereinigung').first().json;\nconst dataforseoResult = $input.first().json;\n\nreturn [{\n  json: {\n    ...textData,\n    dataforseo_results: JSON.stringify(dataforseoResult, null, 2)\n  }\n}];"
      },
      "id": "merge-dataforseo",
      "name": "DataForSEO Merge",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2550, 200]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.anthropic.com/v1/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "anthropic-version",
              "value": "2023-06-01"
            },
            {
              "name": "content-type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ model: 'claude-sonnet-4-20250514', max_tokens: 2500, messages: [{ role: 'user', content: 'Du bist ein erfahrener SEO-Experte mit Fokus auf den deutschen Markt. Analysiere den folgenden Website-Text und die technischen SEO-Daten.\\n\\n## Der Text:\\n' + $json.fullText + '\\n\\n## Meta-Daten:\\n- Title: ' + $json.title + '\\n- Meta Description: ' + $json.metaDescription + '\\n- H1: ' + JSON.stringify($json.headings.h1) + '\\n- H2: ' + JSON.stringify($json.headings.h2) + '\\n- Wortanzahl: ' + $json.stats.wordCount + '\\n\\n## DataForSEO Ergebnisse:\\n' + $json.dataforseo_results + '\\n\\n## Hauptkeyword (falls angegeben): ' + ($json.hauptkeyword || 'nicht angegeben') + '\\n## Branche: ' + ($json.branche || 'nicht angegeben') + '\\n\\n## Deine Analyse:\\n\\n### 1. E-E-A-T Bewertung\\n- **Experience (Erfahrung):** Zeigt der Text echte Erfahrung mit dem Thema?\\n- **Expertise:** Wird Fachwissen erkennbar?\\n- **Authoritativeness (Autorit√§t):** Gibt es Vertrauenssignale (Referenzen, Zertifikate, Fallstudien)?\\n- **Trustworthiness (Vertrauensw√ºrdigkeit):** Transparenz, Impressum-Signale, Kontaktdaten?\\n\\n### 2. YMYL-Einsch√§tzung\\nIst der Inhalt YMYL-relevant (Your Money Your Life)? Falls ja, sind die erh√∂hten Anforderungen erf√ºllt?\\n\\n### 3. Erste-S√§tze-Check\\nPr√ºfe die ersten 2-3 S√§tze:\\n- Wird klar, worum es geht?\\n- Ist die Zielgruppe erkennbar?\\n- Wird das Problem/die L√∂sung genannt?\\n\\n### 4. Struktur-Bewertung\\n- Kurze Abs√§tze (max. 3-4 Zeilen)?\\n- Sinnvoller Einsatz von Listen/Bulletpoints?\\n- Logische Zwischen√ºberschriften?\\n- Nat√ºrlicher Lesefluss?\\n\\n### 5. Keyword-Analyse\\n- Nat√ºrliche Keyword-Integration (kein Stuffing)?\\n- LSI-Keywords / Synonyme vorhanden?\\n- Keyword im Title, H1, Meta Description?\\n- Keyword-Dichte im gesunden Bereich (1-3%)?\\n\\n### 6. Gesamtbewertung\\nScore 1-10 f√ºr Google-Optimierung.\\n\\n## Antwortformat (JSON):\\n{\\n  \"eeat\": {\\n    \"experience\": { \"score\": 7, \"details\": \"...\" },\\n    \"expertise\": { \"score\": 6, \"details\": \"...\" },\\n    \"authoritativeness\": { \"score\": 5, \"details\": \"...\" },\\n    \"trustworthiness\": { \"score\": 8, \"details\": \"...\" }\\n  },\\n  \"ymyl\": {\\n    \"relevant\": false,\\n    \"erfuellt\": false,\\n    \"details\": \"...\"\\n  },\\n  \"erste_saetze\": {\\n    \"thema_klar\": true,\\n    \"zielgruppe_klar\": true,\\n    \"problem_loesung_klar\": true,\\n    \"details\": \"...\"\\n  },\\n  \"struktur\": {\\n    \"kurze_absaetze\": true,\\n    \"listen_bulletpoints\": true,\\n    \"zwischenueberschriften\": true,\\n    \"lesefluss\": \"gut\",\\n    \"details\": \"...\"\\n  },\\n  \"keywords\": {\\n    \"natuerliche_integration\": true,\\n    \"lsi_vorhanden\": true,\\n    \"keyword_in_title\": true,\\n    \"keyword_in_h1\": true,\\n    \"keyword_in_meta\": true,\\n    \"keyword_dichte_prozent\": 1.8,\\n    \"details\": \"...\"\\n  },\\n  \"score\": 7,\\n  \"verbesserungsvorschlaege\": [\"...\", \"...\"]\\n}\\n\\nAntworte NUR mit dem JSON-Objekt.' }] }) }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 120000
        }
      },
      "id": "google-check-claude",
      "name": "Google-Check Claude",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2800, 200],
      "credentials": {
        "httpHeaderAuth": {
          "id": "anthropic-api-key",
          "name": "Anthropic API Key"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse Google-Check Antwort\nconst response = $input.first().json;\ntry {\n  const text = response.content[0].text;\n  const cleaned = text.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n  const parsed = JSON.parse(cleaned);\n  return [{ json: { google_check: parsed } }];\n} catch (error) {\n  return [{ json: { google_check: { error: true, rawResponse: response.content?.[0]?.text || 'Parse Error', score: 0 } } }];\n}"
      },
      "id": "google-check-parse",
      "name": "Google-Check Parse",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [3050, 200]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.anthropic.com/v1/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "anthropic-version",
              "value": "2023-06-01"
            },
            {
              "name": "content-type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ model: 'claude-sonnet-4-20250514', max_tokens: 2500, messages: [{ role: 'user', content: 'Du bist ein Experte f√ºr Textverst√§ndlichkeit und Lesbarkeit. Analysiere den folgenden Website-Text aus der Perspektive eines durchschnittlichen Menschen mit Leseniveau 8. Klasse.\\n\\n## Der Text:\\n' + $json.fullText + '\\n\\n## Textstatistiken:\\n- Wortanzahl: ' + $json.stats.wordCount + '\\n- Satzanzahl: ' + $json.stats.sentenceCount + '\\n- Durchschnittliche Satzl√§nge: ' + $json.stats.avgSentenceLength + ' W√∂rter\\n- Abs√§tze: ' + $json.stats.paragraphCount + '\\n\\n## Deine Analyse:\\n\\n### 1. Lesbarkeit\\n- Durchschnittliche Satzl√§nge (Ziel: < 15-20 W√∂rter)\\n- Wie viele S√§tze sind zu lang? Liste die schlimmsten 3 auf.\\n- Wird pro Satz nur ein Gedanke ausgedr√ºckt?\\n\\n### 2. Verst√§ndlichkeit\\n- Werden konkrete W√∂rter statt Abstrakta verwendet?\\n- Gibt es Fachbegriffe ohne Erkl√§rung?\\n- Werden Beispiele statt reiner Theorie verwendet?\\n- K√∂nnte ein Mensch nach 10 Sekunden Thema + Nutzen erkennen?\\n\\n### 3. Struktur\\n- Klare Abs√§tze mit logischer Trennung?\\n- Visuelle Gliederung (√úberschriften, Listen)?\\n- Roter Faden erkennbar?\\n- Gibt es einen klaren Call-to-Action?\\n\\n### 4. Handlungstest\\n\"Was w√ºrde ein Mensch nach dem Lesen tun?\"\\n- Ist klar, was der n√§chste Schritt ist?\\n- Ist die Handlungsaufforderung eindeutig?\\n- Gibt es Motivation zum Handeln?\\n\\n### 5. Flesch-Reading-Ease (Deutsch angepasst)\\nBerechne den ungef√§hren Flesch-Wert f√ºr deutschen Text:\\n- 0-30: Sehr schwer (Wissenschaft)\\n- 30-50: Schwer (Fachtext)\\n- 50-60: Mittelschwer (Qualit√§tsjournalismus)\\n- 60-70: Normal (Boulevardpresse)\\n- 70-80: Leicht (Werbung)\\n- 80-100: Sehr leicht (Comics)\\n\\n### 6. Gesamtbewertung\\nScore 1-10 f√ºr Mensch-Verst√§ndlichkeit.\\n\\n## Antwortformat (JSON):\\n{\\n  \"lesbarkeit\": {\\n    \"avg_satzlaenge\": 18,\\n    \"zu_lange_saetze\": [\\n      { \"satz\": \"...\", \"wortanzahl\": 35 }\\n    ],\\n    \"ein_gedanke_pro_satz\": true,\\n    \"details\": \"...\"\\n  },\\n  \"verstaendlichkeit\": {\\n    \"konkrete_sprache\": true,\\n    \"fachbegriffe_ohne_erklaerung\": [\"...\"],\\n    \"beispiele_vorhanden\": true,\\n    \"10_sekunden_test\": true,\\n    \"details\": \"...\"\\n  },\\n  \"struktur\": {\\n    \"klare_absaetze\": true,\\n    \"visuelle_gliederung\": true,\\n    \"roter_faden\": true,\\n    \"call_to_action\": true,\\n    \"details\": \"...\"\\n  },\\n  \"handlungstest\": {\\n    \"naechster_schritt_klar\": true,\\n    \"handlungsaufforderung\": \"...\",\\n    \"motivation\": \"gut\",\\n    \"details\": \"...\"\\n  },\\n  \"flesch_score\": 62,\\n  \"flesch_level\": \"Normal\",\\n  \"score\": 6,\\n  \"verbesserungsvorschlaege\": [\"...\", \"...\"]\\n}\\n\\nAntworte NUR mit dem JSON-Objekt.' }] }) }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 120000
        }
      },
      "id": "mensch-check",
      "name": "Mensch-Check",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1800, 400],
      "credentials": {
        "httpHeaderAuth": {
          "id": "anthropic-api-key",
          "name": "Anthropic API Key"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse Mensch-Check Antwort\nconst response = $input.first().json;\ntry {\n  const text = response.content[0].text;\n  const cleaned = text.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n  const parsed = JSON.parse(cleaned);\n  return [{ json: { mensch_check: parsed } }];\n} catch (error) {\n  return [{ json: { mensch_check: { error: true, rawResponse: response.content?.[0]?.text || 'Parse Error', score: 0 } } }];\n}"
      },
      "id": "mensch-check-parse",
      "name": "Mensch-Check Parse",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2050, 400]
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "id": "merge-results",
      "name": "Ergebnisse zusammenf√ºhren",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [3300, 200]
    },
    {
      "parameters": {
        "jsCode": "// Merge alle 3 Check-Ergebnisse in ein Objekt\nconst items = $input.all();\nlet merged = {};\nfor (const item of items) {\n  Object.assign(merged, item.json);\n}\n\n// Textdaten aus vorherigem Node hinzuf√ºgen\nconst textData = $('Text-Extraktion & Bereinigung').first().json;\nconst formData = $('Angebotsseite eingeben').first().json;\n\nreturn [{\n  json: {\n    ki_check: merged.ki_check || {},\n    google_check: merged.google_check || {},\n    mensch_check: merged.mensch_check || {},\n    textData: textData,\n    formData: formData\n  }\n}];"
      },
      "id": "merge-code",
      "name": "Merge aufbereiten",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [3550, 200]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.anthropic.com/v1/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "anthropic-version",
              "value": "2023-06-01"
            },
            {
              "name": "content-type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ model: 'claude-sonnet-4-20250514', max_tokens: 2500, messages: [{ role: 'user', content: 'Du bist der finale Pr√ºfer im Angebots-Verst√§ndlichkeits-Check. Du hast die Ergebnisse von drei unabh√§ngigen Checks erhalten. Deine Aufgabe: Pr√ºfe, ob KI, Google und Mensch dasselbe verstanden haben.\\n\\n## KI-Check Ergebnis:\\n' + JSON.stringify($json.ki_check) + '\\n\\n## Google-Check Ergebnis:\\n' + JSON.stringify($json.google_check) + '\\n\\n## Mensch-Check Ergebnis:\\n' + JSON.stringify($json.mensch_check) + '\\n\\n## Deine Aufgaben:\\n\\n### 1. Konsistenz-Pr√ºfung\\n- Verstehen alle drei dasselbe Kernthema?\\n- Gibt es Widerspr√ºche zwischen den Analysen?\\n- Wo sind die gr√∂√üten Abweichungen?\\n\\n### 2. Der Killer-Test\\nBeantworte diese drei Fragen basierend auf den Ergebnissen:\\n1. Kann die KI korrekt erkl√§ren, worum es geht? (Ja/Nein + Begr√ºndung)\\n2. W√ºrde ein Mensch wissen, was er tun soll? (Ja/Nein + Begr√ºndung)\\n3. Erkennt man Thema + Nutzen in 10 Sekunden? (Ja/Nein + Begr√ºndung)\\n\\n### 3. Gesamt-Score\\nBerechne einen gewichteten Gesamtscore:\\n- KI-Verst√§ndlichkeit: 30%\\n- Google-Optimierung: 30%\\n- Mensch-Verst√§ndlichkeit: 40%\\n\\n### 4. Ampel-Bewertung\\n- GRUEN (8-10): Text ist f√ºr alle drei verst√§ndlich\\n- GELB (5-7): Verbesserungspotenzial, aber brauchbar\\n- ROT (1-4): Text muss dringend √ºberarbeitet werden\\n\\n### 5. Top-3 Sofort-Ma√ünahmen\\nWas sind die drei wichtigsten Dinge, die sofort verbessert werden sollten?\\n\\n## Antwortformat (JSON):\\n{\\n  \"konsistenz\": {\\n    \"gleiches_thema\": true,\\n    \"widersprueche\": [\"...\"],\\n    \"groesste_abweichung\": \"...\"\\n  },\\n  \"killer_test\": {\\n    \"ki_versteht\": { \"ergebnis\": true, \"begruendung\": \"...\" },\\n    \"mensch_handelt\": { \"ergebnis\": true, \"begruendung\": \"...\" },\\n    \"10_sekunden_test\": { \"ergebnis\": true, \"begruendung\": \"...\" }\\n  },\\n  \"gesamt_score\": {\\n    \"ki_score\": 7,\\n    \"google_score\": 6,\\n    \"mensch_score\": 8,\\n    \"gewichtet\": 7.1,\\n    \"ampel\": \"gelb\"\\n  },\\n  \"top3_massnahmen\": [\\n    { \"prioritaet\": 1, \"massnahme\": \"...\", \"begruendung\": \"...\" },\\n    { \"prioritaet\": 2, \"massnahme\": \"...\", \"begruendung\": \"...\" },\\n    { \"prioritaet\": 3, \"massnahme\": \"...\", \"begruendung\": \"...\" }\\n  ],\\n  \"fazit\": \"Ein zusammenfassender Absatz mit der Gesamtbewertung...\"\\n}\\n\\nAntworte NUR mit dem JSON-Objekt.' }] }) }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          },
          "timeout": 120000
        }
      },
      "id": "killer-test",
      "name": "Killer-Test",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [3800, 200],
      "credentials": {
        "httpHeaderAuth": {
          "id": "anthropic-api-key",
          "name": "Anthropic API Key"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse Killer-Test Antwort\nconst response = $input.first().json;\ntry {\n  const text = response.content[0].text;\n  const cleaned = text.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n  const parsed = JSON.parse(cleaned);\n  return [{ json: parsed }];\n} catch (error) {\n  return [{ json: { error: true, rawResponse: response.content?.[0]?.text || 'Parse Error' } }];\n}"
      },
      "id": "killer-test-parse",
      "name": "Killer-Test Parse",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [4050, 200]
    },
    {
      "parameters": {
        "jsCode": "// ========================================\n// SCORE BERECHNEN & REPORT FORMATIEREN\n// Berechnet Scores und bereitet Daten f√ºr Sheet + E-Mail vor\n// ========================================\n\nconst formData = $('Angebotsseite eingeben').first().json;\nconst textData = $('Text-Extraktion & Bereinigung').first().json;\nconst mergedData = $('Merge aufbereiten').first().json;\nconst killerTest = $input.first().json;\n\nconst kiCheck = mergedData.ki_check || {};\nconst googleCheck = mergedData.google_check || {};\nconst menschCheck = mergedData.mensch_check || {};\n\nconst gesamtScore = killerTest.gesamt_score?.gewichtet || 0;\nconst ampel = gesamtScore >= 8 ? 'üü¢ GR√úN' : gesamtScore >= 5 ? 'üü° GELB' : 'üî¥ ROT';\n\n// Datum formatieren\nconst now = new Date();\nconst datum = now.toLocaleDateString('de-DE', {\n  day: '2-digit', month: '2-digit', year: 'numeric',\n  hour: '2-digit', minute: '2-digit'\n});\n\n// Ampel-Farbe f√ºr E-Mail\nconst ampelFarbe = gesamtScore >= 8 ? '#4CAF50' : gesamtScore >= 5 ? '#FFC107' : '#F44336';\n\n// Offene Fragen als HTML-Liste\nconst offeneFragenListe = (kiCheck.offene_fragen || []).map(f => '<li>' + f + '</li>').join('\\n      ');\n\n// Killer-Test Ergebnisse\nconst kiVersteht = killerTest.killer_test?.ki_versteht?.ergebnis ? '‚úÖ Ja' : '‚ùå Nein';\nconst menschHandelt = killerTest.killer_test?.mensch_handelt?.ergebnis ? '‚úÖ Ja' : '‚ùå Nein';\nconst zehnSekTest = killerTest.killer_test?.['10_sekunden_test']?.ergebnis ? '‚úÖ Ja' : '‚ùå Nein';\n\nreturn [{\n  json: {\n    sheet_row: {\n      datum: datum,\n      url: formData['URL'] || textData.url,\n      firmenname: formData['Firmenname'] || 'Nicht angegeben',\n      branche: formData['Branche'] || 'Nicht angegeben',\n      hauptkeyword: formData['Hauptkeyword'] || 'Nicht angegeben',\n      wortanzahl: textData.stats?.wordCount || 0,\n      ki_score: killerTest.gesamt_score?.ki_score || 0,\n      google_score: killerTest.gesamt_score?.google_score || 0,\n      mensch_score: killerTest.gesamt_score?.mensch_score || 0,\n      gesamt_score: gesamtScore,\n      ampel: ampel,\n      zusammenfassung_ki: kiCheck.zusammenfassung || '',\n      offene_fragen: (kiCheck.offene_fragen || []).join(' | '),\n      eeat_experience: googleCheck.eeat?.experience?.score || 0,\n      eeat_expertise: googleCheck.eeat?.expertise?.score || 0,\n      eeat_authority: googleCheck.eeat?.authoritativeness?.score || 0,\n      eeat_trust: googleCheck.eeat?.trustworthiness?.score || 0,\n      flesch_score: menschCheck.flesch_score || 0,\n      flesch_level: menschCheck.flesch_level || '',\n      avg_satzlaenge: menschCheck.lesbarkeit?.avg_satzlaenge || 0,\n      top1_massnahme: killerTest.top3_massnahmen?.[0]?.massnahme || '',\n      top2_massnahme: killerTest.top3_massnahmen?.[1]?.massnahme || '',\n      top3_massnahme: killerTest.top3_massnahmen?.[2]?.massnahme || '',\n      fazit: killerTest.fazit || ''\n    },\n    email_data: {\n      empfaenger: formData['E-Mail'] || textData.email,\n      firmenname: formData['Firmenname'] || textData.firmenname || 'dein Unternehmen',\n      url: formData['URL'] || textData.url,\n      ampel: ampel,\n      ampel_farbe: ampelFarbe,\n      gesamt_score: gesamtScore,\n      ki_score: killerTest.gesamt_score?.ki_score || 0,\n      google_score: killerTest.gesamt_score?.google_score || 0,\n      mensch_score: killerTest.gesamt_score?.mensch_score || 0,\n      zusammenfassung: kiCheck.zusammenfassung || '',\n      offene_fragen_liste: offeneFragenListe,\n      eeat_experience: googleCheck.eeat?.experience?.score || 0,\n      eeat_expertise: googleCheck.eeat?.expertise?.score || 0,\n      eeat_authority: googleCheck.eeat?.authoritativeness?.score || 0,\n      eeat_trust: googleCheck.eeat?.trustworthiness?.score || 0,\n      flesch_score: menschCheck.flesch_score || 0,\n      flesch_level: menschCheck.flesch_level || '',\n      avg_satzlaenge: menschCheck.lesbarkeit?.avg_satzlaenge || 0,\n      wortanzahl: textData.stats?.wordCount || 0,\n      ki_versteht: kiVersteht,\n      mensch_handelt: menschHandelt,\n      zehn_sek_test: zehnSekTest,\n      massnahme_1: killerTest.top3_massnahmen?.[0]?.massnahme || '',\n      begruendung_1: killerTest.top3_massnahmen?.[0]?.begruendung || '',\n      massnahme_2: killerTest.top3_massnahmen?.[1]?.massnahme || '',\n      begruendung_2: killerTest.top3_massnahmen?.[1]?.begruendung || '',\n      massnahme_3: killerTest.top3_massnahmen?.[2]?.massnahme || '',\n      begruendung_3: killerTest.top3_massnahmen?.[2]?.begruendung || '',\n      fazit: killerTest.fazit || ''\n    }\n  }\n}];"
      },
      "id": "score-berechnen",
      "name": "Score berechnen & Report",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [4300, 200]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Datum": "={{ $json.sheet_row.datum }}",
            "URL": "={{ $json.sheet_row.url }}",
            "Firmenname": "={{ $json.sheet_row.firmenname }}",
            "Branche": "={{ $json.sheet_row.branche }}",
            "Hauptkeyword": "={{ $json.sheet_row.hauptkeyword }}",
            "Wortanzahl": "={{ $json.sheet_row.wortanzahl }}",
            "KI-Score": "={{ $json.sheet_row.ki_score }}",
            "Google-Score": "={{ $json.sheet_row.google_score }}",
            "Mensch-Score": "={{ $json.sheet_row.mensch_score }}",
            "Gesamt-Score": "={{ $json.sheet_row.gesamt_score }}",
            "Ampel": "={{ $json.sheet_row.ampel }}",
            "KI-Zusammenfassung": "={{ $json.sheet_row.zusammenfassung_ki }}",
            "Offene Fragen": "={{ $json.sheet_row.offene_fragen }}",
            "E-E-A-T Experience": "={{ $json.sheet_row.eeat_experience }}",
            "E-E-A-T Expertise": "={{ $json.sheet_row.eeat_expertise }}",
            "E-E-A-T Authority": "={{ $json.sheet_row.eeat_authority }}",
            "E-E-A-T Trust": "={{ $json.sheet_row.eeat_trust }}",
            "Flesch-Score": "={{ $json.sheet_row.flesch_score }}",
            "Flesch-Level": "={{ $json.sheet_row.flesch_level }}",
            "√ò Satzl√§nge": "={{ $json.sheet_row.avg_satzlaenge }}",
            "Ma√ünahme 1": "={{ $json.sheet_row.top1_massnahme }}",
            "Ma√ünahme 2": "={{ $json.sheet_row.top2_massnahme }}",
            "Ma√ünahme 3": "={{ $json.sheet_row.top3_massnahme }}",
            "Fazit": "={{ $json.sheet_row.fazit }}"
          },
          "matchingColumns": []
        },
        "options": {}
      },
      "id": "google-sheets",
      "name": "Google Sheet speichern",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [4550, 100],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "google-sheets-credentials",
          "name": "Google Sheets OAuth2"
        }
      },
      "notes": "Spreadsheet-ID und Sheet-Name m√ºssen nach Import konfiguriert werden"
    },
    {
      "parameters": {
        "sendTo": "={{ $json.email_data.empfaenger }}",
        "subject": "={{ $json.email_data.ampel }} Angebots-Check: {{ $json.email_data.gesamt_score }}/10 f√ºr {{ $json.email_data.url }}",
        "emailType": "html",
        "message": "=<div style=\"font-family: Arial, sans-serif; max-width: 700px; margin: 0 auto; color: #333;\">\n\n  <!-- Header -->\n  <div style=\"background: linear-gradient(135deg, #1a1a2e, #16213e); color: white; padding: 30px; border-radius: 12px 12px 0 0;\">\n    <h1 style=\"margin: 0; font-size: 24px;\">üîç Angebots-Verst√§ndlichkeits-Check</h1>\n    <p style=\"margin: 10px 0 0; opacity: 0.8;\">Ergebnis f√ºr {{ $json.email_data.firmenname }}</p>\n  </div>\n\n  <!-- Ampel-Banner -->\n  <div style=\"background: {{ $json.email_data.ampel_farbe }}; padding: 20px; text-align: center; color: white;\">\n    <h2 style=\"margin: 0; font-size: 48px;\">{{ $json.email_data.gesamt_score }}/10</h2>\n    <p style=\"margin: 5px 0 0; font-size: 18px;\">{{ $json.email_data.ampel }}</p>\n  </div>\n\n  <!-- URL -->\n  <div style=\"background: #f5f5f5; padding: 15px; border-left: 4px solid #667eea;\">\n    <strong>Gepr√ºfte Seite:</strong> <a href=\"{{ $json.email_data.url }}\">{{ $json.email_data.url }}</a><br>\n    <strong>Wortanzahl:</strong> {{ $json.email_data.wortanzahl }} | <strong>√ò Satzl√§nge:</strong> {{ $json.email_data.avg_satzlaenge }} W√∂rter\n  </div>\n\n  <!-- Scores -->\n  <div style=\"padding: 20px;\">\n    <h3>üìä Einzelbewertungen</h3>\n    <table style=\"width: 100%; border-collapse: collapse;\">\n      <tr>\n        <td style=\"padding: 12px; border-bottom: 1px solid #eee;\">ü§ñ KI-Verst√§ndlichkeit</td>\n        <td style=\"padding: 12px; border-bottom: 1px solid #eee; text-align: right; font-weight: bold;\">{{ $json.email_data.ki_score }}/10</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 12px; border-bottom: 1px solid #eee;\">üîç Google-Optimierung</td>\n        <td style=\"padding: 12px; border-bottom: 1px solid #eee; text-align: right; font-weight: bold;\">{{ $json.email_data.google_score }}/10</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 12px; border-bottom: 1px solid #eee;\">üë§ Mensch-Verst√§ndlichkeit</td>\n        <td style=\"padding: 12px; border-bottom: 1px solid #eee; text-align: right; font-weight: bold;\">{{ $json.email_data.mensch_score }}/10</td>\n      </tr>\n    </table>\n  </div>\n\n  <!-- KI-Zusammenfassung -->\n  <div style=\"padding: 20px;\">\n    <h3>ü§ñ So versteht die KI dein Angebot</h3>\n    <div style=\"background: #f0f4ff; padding: 15px; border-radius: 8px;\">\n      <p><strong>Zusammenfassung:</strong> {{ $json.email_data.zusammenfassung }}</p>\n    </div>\n    <h4>‚ùì Diese Fragen bleiben offen:</h4>\n    <ul>\n      {{ $json.email_data.offene_fragen_liste }}\n    </ul>\n  </div>\n\n  <!-- E-E-A-T -->\n  <div style=\"padding: 20px;\">\n    <h3>üîç E-E-A-T Bewertung</h3>\n    <table style=\"width: 100%; border-collapse: collapse;\">\n      <tr>\n        <td style=\"padding: 8px;\">Experience (Erfahrung)</td>\n        <td style=\"padding: 8px; text-align: right;\">{{ $json.email_data.eeat_experience }}/10</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 8px;\">Expertise</td>\n        <td style=\"padding: 8px; text-align: right;\">{{ $json.email_data.eeat_expertise }}/10</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 8px;\">Authoritativeness (Autorit√§t)</td>\n        <td style=\"padding: 8px; text-align: right;\">{{ $json.email_data.eeat_authority }}/10</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 8px;\">Trustworthiness (Vertrauen)</td>\n        <td style=\"padding: 8px; text-align: right;\">{{ $json.email_data.eeat_trust }}/10</td>\n      </tr>\n    </table>\n  </div>\n\n  <!-- Lesbarkeit -->\n  <div style=\"padding: 20px;\">\n    <h3>üë§ Lesbarkeit</h3>\n    <p><strong>Flesch-Score:</strong> {{ $json.email_data.flesch_score }} ({{ $json.email_data.flesch_level }})</p>\n    <p><strong>Durchschnittliche Satzl√§nge:</strong> {{ $json.email_data.avg_satzlaenge }} W√∂rter (Ziel: unter 20)</p>\n  </div>\n\n  <!-- Killer-Test -->\n  <div style=\"padding: 20px; background: #f9f9f9; border-radius: 8px;\">\n    <h3>üíÄ Der Killer-Test</h3>\n    <p>{{ $json.email_data.ki_versteht }} KI versteht das Angebot korrekt</p>\n    <p>{{ $json.email_data.mensch_handelt }} Mensch wei√ü, was zu tun ist</p>\n    <p>{{ $json.email_data.zehn_sek_test }} Thema + Nutzen in 10 Sekunden erkennbar</p>\n  </div>\n\n  <!-- Top 3 Ma√ünahmen -->\n  <div style=\"padding: 20px;\">\n    <h3>üéØ Top 3 Sofort-Ma√ünahmen</h3>\n    <div style=\"background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 10px;\">\n      <strong>1. {{ $json.email_data.massnahme_1 }}</strong><br>{{ $json.email_data.begruendung_1 }}\n    </div>\n    <div style=\"background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 10px;\">\n      <strong>2. {{ $json.email_data.massnahme_2 }}</strong><br>{{ $json.email_data.begruendung_2 }}\n    </div>\n    <div style=\"background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 10px;\">\n      <strong>3. {{ $json.email_data.massnahme_3 }}</strong><br>{{ $json.email_data.begruendung_3 }}\n    </div>\n  </div>\n\n  <!-- Fazit -->\n  <div style=\"padding: 20px;\">\n    <h3>üìù Fazit</h3>\n    <p>{{ $json.email_data.fazit }}</p>\n  </div>\n\n  <!-- Footer -->\n  <div style=\"background: #f5f5f5; padding: 20px; text-align: center; border-radius: 0 0 12px 12px; font-size: 12px; color: #999;\">\n    <p>Dieser Report wurde automatisch erstellt vom Angebots-Verst√§ndlichkeits-Checker.</p>\n    <p>Konzipiert von <a href=\"https://www.aiadvisors.pl/en\">Romuald Cz≈Çonkowski - AI Advisors</a></p>\n  </div>\n\n</div>",
        "options": {}
      },
      "id": "gmail-send",
      "name": "E-Mail Report senden",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [4550, 350],
      "credentials": {
        "gmailOAuth2": {
          "id": "gmail-credentials",
          "name": "Gmail OAuth2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Fehlerbehandlung: Crawl fehlgeschlagen nach Retry\nconst formData = $('Angebotsseite eingeben').first().json;\nreturn [{\n  json: {\n    error: true,\n    message: 'Die URL konnte nicht gecrawlt werden. Bitte pr√ºfe die URL und versuche es erneut.',\n    url: formData['URL'] || '',\n    email: formData['E-Mail'] || ''\n  }\n}];"
      },
      "id": "error-crawl-failed",
      "name": "Crawl fehlgeschlagen",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [500, 750]
    },
    {
      "parameters": {
        "sendTo": "={{ $json.email }}",
        "subject": "‚ùå Angebots-Check fehlgeschlagen f√ºr {{ $json.url }}",
        "emailType": "html",
        "message": "=<div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n  <h2 style=\"color: #F44336;\">‚ùå Angebots-Check konnte nicht durchgef√ºhrt werden</h2>\n  <p>Die URL <strong>{{ $json.url }}</strong> konnte leider nicht analysiert werden.</p>\n  <p><strong>M√∂gliche Gr√ºnde:</strong></p>\n  <ul>\n    <li>Die URL ist nicht erreichbar</li>\n    <li>Die Seite blockiert automatische Zugriffe</li>\n    <li>Die Seite enth√§lt keinen auswertbaren Text</li>\n  </ul>\n  <p>Bitte pr√ºfe die URL und versuche es erneut.</p>\n  <p style=\"color: #999; font-size: 12px;\">Angebots-Verst√§ndlichkeits-Checker</p>\n</div>",
        "options": {}
      },
      "id": "gmail-error",
      "name": "Fehler-E-Mail senden",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [750, 750],
      "credentials": {
        "gmailOAuth2": {
          "id": "gmail-credentials",
          "name": "Gmail OAuth2"
        }
      }
    }
  ],
  "connections": {
    "Angebotsseite eingeben": {
      "main": [
        [
          {
            "node": "Apify Crawl starten",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apify Crawl starten": {
      "main": [
        [
          {
            "node": "Warte 15s",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Warte 15s": {
      "main": [
        [
          {
            "node": "Apify Status pr√ºfen",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apify Status pr√ºfen": {
      "main": [
        [
          {
            "node": "Crawl erfolgreich?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Crawl erfolgreich?": {
      "main": [
        [
          {
            "node": "Apify Dataset abrufen",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Warte nochmal 15s",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Warte nochmal 15s": {
      "main": [
        [
          {
            "node": "Apify Status pr√ºfen 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apify Status pr√ºfen 2": {
      "main": [
        [
          {
            "node": "Crawl erfolgreich? 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Crawl erfolgreich? 2": {
      "main": [
        [
          {
            "node": "Apify Dataset abrufen",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Crawl fehlgeschlagen",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apify Dataset abrufen": {
      "main": [
        [
          {
            "node": "Text-Extraktion & Bereinigung",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Text-Extraktion & Bereinigung": {
      "main": [
        [
          {
            "node": "KI-Check",
            "type": "main",
            "index": 0
          },
          {
            "node": "DataForSEO OnPage Start",
            "type": "main",
            "index": 0
          },
          {
            "node": "Mensch-Check",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "KI-Check": {
      "main": [
        [
          {
            "node": "KI-Check Parse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "KI-Check Parse": {
      "main": [
        [
          {
            "node": "Ergebnisse zusammenf√ºhren",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DataForSEO OnPage Start": {
      "main": [
        [
          {
            "node": "Warte auf DataForSEO",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Warte auf DataForSEO": {
      "main": [
        [
          {
            "node": "DataForSEO Summary abrufen",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DataForSEO Summary abrufen": {
      "main": [
        [
          {
            "node": "DataForSEO Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DataForSEO Merge": {
      "main": [
        [
          {
            "node": "Google-Check Claude",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google-Check Claude": {
      "main": [
        [
          {
            "node": "Google-Check Parse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google-Check Parse": {
      "main": [
        [
          {
            "node": "Ergebnisse zusammenf√ºhren",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Mensch-Check": {
      "main": [
        [
          {
            "node": "Mensch-Check Parse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mensch-Check Parse": {
      "main": [
        [
          {
            "node": "Ergebnisse zusammenf√ºhren",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Ergebnisse zusammenf√ºhren": {
      "main": [
        [
          {
            "node": "Merge aufbereiten",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge aufbereiten": {
      "main": [
        [
          {
            "node": "Killer-Test",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Killer-Test": {
      "main": [
        [
          {
            "node": "Killer-Test Parse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Killer-Test Parse": {
      "main": [
        [
          {
            "node": "Score berechnen & Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Score berechnen & Report": {
      "main": [
        [
          {
            "node": "Google Sheet speichern",
            "type": "main",
            "index": 0
          },
          {
            "node": "E-Mail Report senden",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Crawl fehlgeschlagen": {
      "main": [
        [
          {
            "node": "Fehler-E-Mail senden",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "timezone": "Europe/Berlin",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "executionTimeout": 300
  },
  "active": false,
  "tags": [
    {
      "name": "Angebots-Check"
    },
    {
      "name": "SEO"
    },
    {
      "name": "KI-Analyse"
    }
  ]
}